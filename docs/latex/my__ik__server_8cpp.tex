\hypertarget{my__ik__server_8cpp}{}\doxysection{src/my\+\_\+ik\+\_\+server.cpp File Reference}
\label{my__ik__server_8cpp}\index{src/my\_ik\_server.cpp@{src/my\_ik\_server.cpp}}


Inverse Kinematics solver.  


{\ttfamily \#include $<$ros/ros.\+h$>$}\newline
{\ttfamily \#include $<$tf/transform\+\_\+broadcaster.\+h$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$geometry\+\_\+msgs/\+Pose\+Stamped.\+h$>$}\newline
{\ttfamily \#include $<$sensor\+\_\+msgs/\+Joint\+State.\+h$>$}\newline
{\ttfamily \#include $<$kdl/chain.\+hpp$>$}\newline
{\ttfamily \#include $<$urdf/model.\+h$>$}\newline
{\ttfamily \#include $<$kdl\+\_\+parser/kdl\+\_\+parser.\+hpp$>$}\newline
{\ttfamily \#include $<$kdl/tree.\+hpp$>$}\newline
{\ttfamily \#include $<$kdl/frames.\+hpp$>$}\newline
{\ttfamily \#include $<$kdl/chainiksolverpos\+\_\+nr\+\_\+jl.\+hpp$>$}\newline
{\ttfamily \#include $<$kdl/chainiksolvervel\+\_\+pinv.\+hpp$>$}\newline
{\ttfamily \#include $<$kdl/chainfksolverpos\+\_\+recursive.\+hpp$>$}\newline
{\ttfamily \#include $<$my\+\_\+thesis\+\_\+pkg/\+My\+Inverse\+Kinematic.\+h$>$}\newline
Include dependency graph for my\+\_\+ik\+\_\+server.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{my__ik__server_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_ac2e42f203d0cb05227a453f88415d8ac}\label{my__ik__server_8cpp_ac2e42f203d0cb05227a453f88415d8ac}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries left\+\_\+joint\+\_\+limits\+\_\+min} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a43e9e0bd0b449e7c664ff1ad218dde99}\label{my__ik__server_8cpp_a43e9e0bd0b449e7c664ff1ad218dde99}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries left\+\_\+joint\+\_\+limits\+\_\+max} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_aca706d1d71fd34574f34169e788a75d1}\label{my__ik__server_8cpp_aca706d1d71fd34574f34169e788a75d1}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries right\+\_\+joint\+\_\+limits\+\_\+min} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a16040d3f1e301b3377f21290a613d5ba}\label{my__ik__server_8cpp_a16040d3f1e301b3377f21290a613d5ba}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries right\+\_\+joint\+\_\+limits\+\_\+max} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a480c3e0eb4bacca2056a85fd88a3955c}\label{my__ik__server_8cpp_a480c3e0eb4bacca2056a85fd88a3955c}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries left\+\_\+joint\+\_\+positions\+\_\+initial} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_ad32e107ec7cbb969577e8ca8337f296a}\label{my__ik__server_8cpp_ad32e107ec7cbb969577e8ca8337f296a}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries right\+\_\+joint\+\_\+positions\+\_\+initial} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_ac6b7a69846afcf5ebdf39587178b73bb}\label{my__ik__server_8cpp_ac6b7a69846afcf5ebdf39587178b73bb}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries left\+\_\+joint\+\_\+positions\+\_\+result} (number\+\_\+of\+\_\+joints)
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a626345cb783f70ffea621d64f5be369e}\label{my__ik__server_8cpp_a626345cb783f70ffea621d64f5be369e}} 
K\+D\+L\+::\+Jnt\+Array {\bfseries right\+\_\+joint\+\_\+positions\+\_\+result} (number\+\_\+of\+\_\+joints)
\item 
void \mbox{\hyperlink{my__ik__server_8cpp_abf193baadf33efc0a0600d5ffb62be76}{joint\+State\+Callback}} (const sensor\+\_\+msgs\+::\+Joint\+State\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback for for the my\+Remapped\+\_\+cmd\+\_\+vel topic. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{my__ik__server_8cpp_a4cab2ce9cdcddb98d90e0ae1f77f2728}{I\+K\+Solver}} (my\+\_\+thesis\+\_\+pkg\+::\+My\+Inverse\+Kinematic\+::\+Request \&req, my\+\_\+thesis\+\_\+pkg\+::\+My\+Inverse\+Kinematic\+::\+Response \&res)
\begin{DoxyCompactList}\small\item\em Callback of the service /my\+\_\+ik\+\_\+solver\+\_\+service ~\newline
 \end{DoxyCompactList}\item 
int \mbox{\hyperlink{my__ik__server_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em main function \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a33b9c04d4eda8b0f596ab32e221d8c86}\label{my__ik__server_8cpp_a33b9c04d4eda8b0f596ab32e221d8c86}} 
std\+::string \mbox{\hyperlink{my__ik__server_8cpp_a33b9c04d4eda8b0f596ab32e221d8c86}{base\+\_\+link}} = \char`\"{}torso\+\_\+lift\+\_\+link\char`\"{}
\begin{DoxyCompactList}\small\item\em chain\textquotesingle{}s base link definition \end{DoxyCompactList}\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a43ac2c249b6c137af6ab489a2f982ad6}\label{my__ik__server_8cpp_a43ac2c249b6c137af6ab489a2f982ad6}} 
std\+::string \mbox{\hyperlink{my__ik__server_8cpp_a43ac2c249b6c137af6ab489a2f982ad6}{left\+\_\+end\+\_\+link}} = \char`\"{}arm\+\_\+left\+\_\+tool\+\_\+link\char`\"{}
\begin{DoxyCompactList}\small\item\em left chain\textquotesingle{}s end link definition \end{DoxyCompactList}\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a9150835a660c743a3254c1e8cc897144}\label{my__ik__server_8cpp_a9150835a660c743a3254c1e8cc897144}} 
std\+::string \mbox{\hyperlink{my__ik__server_8cpp_a9150835a660c743a3254c1e8cc897144}{right\+\_\+end\+\_\+link}} = \char`\"{}arm\+\_\+right\+\_\+tool\+\_\+link\char`\"{}
\begin{DoxyCompactList}\small\item\em right chain\textquotesingle{}s end link definition \end{DoxyCompactList}\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a84665e85155b21e6026cedd7841ad980}\label{my__ik__server_8cpp_a84665e85155b21e6026cedd7841ad980}} 
K\+D\+L\+::\+Chain {\bfseries left\+\_\+kdl\+\_\+chain}
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_aa1eac1c4128beb890b0192c2d84c47fc}\label{my__ik__server_8cpp_aa1eac1c4128beb890b0192c2d84c47fc}} 
K\+D\+L\+::\+Chain {\bfseries right\+\_\+kdl\+\_\+chain}
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_a239b059060fcac98002e04db84d5363b}\label{my__ik__server_8cpp_a239b059060fcac98002e04db84d5363b}} 
int {\bfseries number\+\_\+of\+\_\+joints} = 7
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_aa0db8af7f0e314906d2c398b632abe84}\label{my__ik__server_8cpp_aa0db8af7f0e314906d2c398b632abe84}} 
K\+D\+L\+::\+Frame {\bfseries right\+\_\+end\+\_\+effector\+\_\+desired}
\item 
\mbox{\Hypertarget{my__ik__server_8cpp_aded90e02345a97149d25221da7e5788f}\label{my__ik__server_8cpp_aded90e02345a97149d25221da7e5788f}} 
K\+D\+L\+::\+Frame {\bfseries left\+\_\+end\+\_\+effector\+\_\+desired}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Inverse Kinematics solver. 

\begin{DoxyAuthor}{Author}
Claudio Del Gaizo 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
7/12/2023
\end{DoxyDate}
Subscribes to\+: ~\newline


/joint\+\_\+states \+: to have info about T\+I\+A\+Go\textquotesingle{}s current arms configuration

Service server to\+: ~\newline


/my\+\_\+ik\+\_\+solver\+\_\+service \+: to receive request about Inverse kinematics computations

Description\+:

This simple node implements the server for the service \char`\"{}/my\+\_\+ik\+\_\+solver\+\_\+service\char`\"{}, receving request to compute the inverse kinematic. Given a frame position of the end effector return T\+I\+A\+Go\textquotesingle{}s arm configuration required to reach, Subscribes to /joint\+\_\+states to have info about T\+I\+A\+Go\textquotesingle{}s current arms configuration useful for its computations. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{my__ik__server_8cpp_a4cab2ce9cdcddb98d90e0ae1f77f2728}\label{my__ik__server_8cpp_a4cab2ce9cdcddb98d90e0ae1f77f2728}} 
\index{my\_ik\_server.cpp@{my\_ik\_server.cpp}!IKSolver@{IKSolver}}
\index{IKSolver@{IKSolver}!my\_ik\_server.cpp@{my\_ik\_server.cpp}}
\doxysubsubsection{\texorpdfstring{IKSolver()}{IKSolver()}}
{\footnotesize\ttfamily bool I\+K\+Solver (\begin{DoxyParamCaption}\item[{my\+\_\+thesis\+\_\+pkg\+::\+My\+Inverse\+Kinematic\+::\+Request \&}]{req,  }\item[{my\+\_\+thesis\+\_\+pkg\+::\+My\+Inverse\+Kinematic\+::\+Response \&}]{res }\end{DoxyParamCaption})}



Callback of the service /my\+\_\+ik\+\_\+solver\+\_\+service ~\newline
 


\begin{DoxyParams}{Parameters}
{\em req} & \+: my\+\_\+thesis\+\_\+pkg\+::\+My\+Inverse\+Kinematic\+::\+Request \+: contains a 6D desired Pose of the end effector\\
\hline
{\em resp} & \+: \+:my\+\_\+thesis\+\_\+pkg\+::\+My\+Inverse\+Kinematic\+::\+Response \+: contains the correpsondent arm\textquotesingle{}s joints configuration to place the end effector in the desired pose\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool
\end{DoxyReturn}
This function is executed each time a new request is received. Takes the request Pose and computes the inverse kinematics on T\+I\+A\+Go\textquotesingle{}s geometry using Newton Raphson method, sendind as response the correpsondent arm\textquotesingle{}s joints configuration to place the end effector in the desired pose. \mbox{\Hypertarget{my__ik__server_8cpp_abf193baadf33efc0a0600d5ffb62be76}\label{my__ik__server_8cpp_abf193baadf33efc0a0600d5ffb62be76}} 
\index{my\_ik\_server.cpp@{my\_ik\_server.cpp}!jointStateCallback@{jointStateCallback}}
\index{jointStateCallback@{jointStateCallback}!my\_ik\_server.cpp@{my\_ik\_server.cpp}}
\doxysubsubsection{\texorpdfstring{jointStateCallback()}{jointStateCallback()}}
{\footnotesize\ttfamily void joint\+State\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Joint\+State\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback for for the my\+Remapped\+\_\+cmd\+\_\+vel topic. 


\begin{DoxyParams}{Parameters}
{\em msg} & \+: sensor\+\_\+msgs\+::\+Joint\+State\+::\+Const\+Ptr \+: the pointer to the joint state data\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
Callback function to update current joint states information \mbox{\Hypertarget{my__ik__server_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{my__ik__server_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{my\_ik\_server.cpp@{my\_ik\_server.cpp}!main@{main}}
\index{main@{main}!my\_ik\_server.cpp@{my\_ik\_server.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



main function 

Entry point. Initializes the node, the subscriber to /joint\+\_\+states and the service server to /my\+\_\+ik\+\_\+solver\+\_\+service. Then it initializes useful variablee for the IK computation and waits for the service to be called. 